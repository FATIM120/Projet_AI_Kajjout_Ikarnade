{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section">
    <div class="container py-5">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-5 mb-lg-0">
                <h1 class="hero-title mb-4">{{ t('title') }}</h1>
                <p class="hero-subtitle mb-4">{{ t('description') }}</p>
                <div class="hero-features mb-4">
                    <div class="feature-item">
                        <i class="fas fa-magic feature-icon"></i>
                        <span>Intelligence Artificielle</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-globe feature-icon"></i>
                        <span>Multilingue</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-bolt feature-icon"></i>
                        <span>Rapide & Efficace</span>
                    </div>
                </div>
                <button class="btn btn-primary btn-lg px-4 get-started-btn" onclick="scrollToForm()">
                    <i class="fas fa-rocket me-2"></i> Commencer maintenant
                </button>
            </div>
            <div class="col-lg-6">
                <div class="hero-image">
                    <div class="video-placeholder rounded shadow-lg">
                        <div class="play-icon">
                            <i class="fas fa-play-circle"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="features-section py-5">
    <div class="container">
        <h2 class="section-title text-center mb-5">{{ t('how_it_works') }}</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon-wrapper">
                        <i class="fas fa-upload"></i>
                    </div>
                    <h3>1. Téléchargez vos images</h3>
                    <p>Importez jusqu'à 10 images pour créer votre vidéo publicitaire personnalisée.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon-wrapper">
                        <i class="fas fa-pen"></i>
                    </div>
                    <h3>2. Écrivez votre description</h3>
                    <p>Décrivez votre produit ou service dans la langue de votre choix.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon-wrapper">
                        <i class="fas fa-film"></i>
                    </div>
                    <h3>3. Générez votre vidéo</h3>
                    <p>Notre IA transforme vos images et texte en une vidéo publicitaire professionnelle.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Form Section -->
<div class="form-section py-5" id="createForm">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card main-card">
                    <div class="card-body">
                        <h2 class="card-title text-center mb-4">{{ t('title') }}</h2>
                        
                        <form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data" class="ad-form">
                            <div class="mb-4">
                                <label for="images" class="form-label">{{ t('upload_label') }}</label>
                                <div class="image-upload-container">
                                    <div class="image-upload-preview" id="imagePreview"></div>
                                    <div class="image-upload-input">
                                        <input type="file" class="form-control" id="images" name="images" accept="image/*" multiple required>
                                    </div>
                                </div>
                                <div class="form-text">
                                    <i class="fas fa-info-circle"></i> 
                                    Upload images to be used in your video ad (up to 10 images allowed).
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label for="description" class="form-label">{{ t('description_label') }}</label>
                                <textarea class="form-control" id="description" name="description" rows="4" placeholder="{{ t('description_placeholder') }}" required></textarea>
                            </div>
                            
                            <div class="mb-4">
                                <label for="language" class="form-label">{{ t('language_label') }}</label>
                                <select class="form-select" id="language" name="language">
                                    <option value="en" {% if current_lang == 'en' %}selected{% endif %}>{{ t('english') }}</option>
                                    <option value="fr" {% if current_lang == 'fr' %}selected{% endif %}>{{ t('french') }}</option>
                                    <option value="ar" {% if current_lang == 'ar' %}selected{% endif %}>{{ t('arabic') }}</option>
                                </select>
                            </div>
                            
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg px-5">
                                    <i class="fas fa-video me-2"></i> {{ t('generate_button') }}
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Testimonials Section -->
<div class="testimonials-section py-5">
    <div class="container">
        <h2 class="section-title text-center mb-5">{{ t('testimonials_title') }}</h2>
        <div class="row testimonials-slider">
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"J'ai créé une publicité incroyable pour mon entreprise en quelques minutes seulement. Le résultat était professionnel et a impressionné tous mes clients!"</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="testimonial-avatar">
                            <img src="https://randomuser.me/api/portraits/women/45.jpg" alt="Sophie Martin">
                        </div>
                        <div class="testimonial-info">
                            <h5>Sophie Martin</h5>
                            <p>Directrice Marketing</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"L'option multilingue m'a permis de créer des publicités pour différents marchés internationaux. Un outil indispensable pour notre expansion globale."</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="testimonial-avatar">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Ahmed Hassan">
                        </div>
                        <div class="testimonial-info">
                            <h5>Ahmed Hassan</h5>
                            <p>CEO, TechGlobal</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"La qualité des vidéos générées est exceptionnelle. J'ai économisé des milliers d'euros en frais de production vidéo grâce à cette plateforme."</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="testimonial-avatar">
                            <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Marie Dubois">
                        </div>
                        <div class="testimonial-info">
                            <h5>Marie Dubois</h5>
                            <p>Entrepreneur</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- FAQ Section -->
{% include 'components/faq.html' %}
{% endblock %}

{% block extra_js %}
<script>
    // Scroll to form function
    function scrollToForm() {
        const formSection = document.getElementById('createForm');
        formSection.scrollIntoView({ behavior: 'smooth' });
    }
    
    // Image preview functionality
    document.getElementById('images').addEventListener('change', function(event) {
        const previewContainer = document.getElementById('imagePreview');
        previewContainer.innerHTML = '';
        
        if (this.files) {
            const maxFiles = 10;
            const files = Array.from(this.files).slice(0, maxFiles);
            
            files.forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const previewItem = document.createElement('div');
                    previewItem.className = 'preview-item';
                    previewItem.innerHTML = `
                        <div class="preview-image" style="background-image: url('${e.target.result}')"></div>
                        <div class="preview-filename">${file.name}</div>
                    `;
                    previewContainer.appendChild(previewItem);
                }
                reader.readAsDataURL(file);
            });
            
            if (this.files.length > maxFiles) {
                const warningElement = document.createElement('div');
                warningElement.className = 'preview-warning';
                warningElement.textContent = `Only the first ${maxFiles} images will be used.`;
                previewContainer.appendChild(warningElement);
            }
        }
    });
    
    // Testimonial slider
    let currentTestimonial = 0;
    const testimonialCards = document.querySelectorAll('.testimonial-card');
    
    function showTestimonials() {
        testimonialCards.forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
        });
        
        testimonialCards[currentTestimonial].style.opacity = '1';
        testimonialCards[currentTestimonial].style.transform = 'translateY(0)';
        
        currentTestimonial = (currentTestimonial + 1) % testimonialCards.length;
    }
    
    // Initialize testimonial rotation if testimonials exist
    if (testimonialCards.length > 0) {
        showTestimonials();
        setInterval(showTestimonials, 5000);
    }
</script>
{% endblock %}
